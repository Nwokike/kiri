{% extends "base.html" %}

{% block title %}Activity Feed | Kiri{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 py-8">
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Activity Feed</h1>
        <p class="text-gray-600 dark:text-gray-400">Updates from the community and researchers you follow.</p>
    </div>

    <div class="flow-root">
        <ul role="list" class="-mb-8">
            {% for action in actions %}
            <li>
                <div class="relative pb-8">
                    {% if not forloop.last %}
                    <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200 dark:bg-[#333]"
                        aria-hidden="true"></span>
                    {% endif %}
                    <div class="relative flex space-x-3">
                        <div>
                            {% include "partials/user_avatar.html" with user=action.user size="sm" %}
                        </div>
                        <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">
                                    <span class="font-medium text-gray-900 dark:text-white">{{ action.user.username
                                        }}</span>
                                    {{ action.verb }}
                                    {% if action.target %}
                                    <a href="{{ action.target.get_absolute_url }}"
                                        class="font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400">
                                        {{ action.target }}
                                    </a>
                                    {% endif %}
                                </p>
                            </div>
                            <div class="text-right text-sm whitespace-nowrap text-gray-500 dark:text-gray-400">
                                <time datetime="{{ action.created|date:'c' }}">{{ action.created|timesince }} ago</time>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            {% empty %}
            <div class="text-center py-12">
                <i class="fas fa-stream text-4xl text-gray-300 dark:text-gray-600 mb-4"></i>
                <p class="text-gray-500 dark:text-gray-400">No activity yet. Follow people to see their updates!</p>
            </div>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}