{% extends "base.html" %}
{% load static %}

{% block title %}Universal Translator | Project 0{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="mb-8 text-center">
        <span class="text-xs font-mono font-bold uppercase text-brand-green tracking-widest mb-2 block">Project 0
            (Alpha)</span>
        <h1 class="text-4xl md:text-5xl font-display font-bold text-text-primary dark:text-white mb-4">Universal
            Translator</h1>
        <p class="text-lg text-text-secondary dark:text-dark-secondary max-w-2xl mx-auto">
            Zero-Server Translation running entirely in your browser using
            <a href="https://huggingface.co/docs/transformers.js" target="_blank"
                class="text-brand-green hover:underline">Transformers.js</a>.
        </p>
    </div>

    <!-- Interface -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 card p-6 md:p-8 dark:bg-dark-surface dark:border-dark-border"
        id="translator-app">

        <!-- Input -->
        <div class="space-y-3">
            <div class="flex justify-between items-center">
                <label class="text-sm font-bold text-text-primary dark:text-white">Input Text</label>
                <select id="src-lang"
                    class="text-xs border border-border rounded px-2 py-1 bg-white dark:bg-dark-bg dark:border-dark-border dark:text-white">
                    <option value="en">English</option>
                    <option value="fr">French</option>
                    <option value="es">Spanish</option>
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="pt">Portuguese</option>
                    <option value="zh">Chinese</option>
                    <option value="ja">Japanese</option>
                </select>
            </div>
            <textarea id="input-text" rows="8"
                class="w-full p-4 rounded-lg border border-border bg-bg-secondary resize-none focus:ring-2 focus:ring-brand-green focus:border-transparent dark:bg-dark-bg dark:border-dark-border dark:text-white"
                placeholder="Type or paste text here..."></textarea>
            <div class="flex justify-between text-xs text-text-tertiary">
                <span id="char-count">0 chars</span>
                <button id="clear-btn" class="hover:text-error">Clear</button>
            </div>
        </div>

        <!-- Output -->
        <div class="space-y-3">
            <div class="flex justify-between items-center">
                <label class="text-sm font-bold text-text-primary dark:text-white">Translation</label>
                <select id="tgt-lang"
                    class="text-xs border border-border rounded px-2 py-1 bg-white dark:bg-dark-bg dark:border-dark-border dark:text-white">
                    <option value="fr">French</option>
                    <option value="es">Spanish</option>
                    <option value="en">English</option>
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="pt">Portuguese</option>
                    <option value="zh">Chinese</option>
                    <option value="ja">Japanese</option>
                </select>
            </div>
            <div class="relative h-full">
                <textarea id="output-text" rows="8"
                    class="w-full p-4 rounded-lg border border-border bg-white resize-none dark:bg-dark-bg dark:border-dark-border dark:text-white"
                    readonly placeholder="Translation will appear here..."></textarea>

                <!-- Loading Overlay -->
                <div id="loader"
                    class="absolute inset-0 bg-white/80 dark:bg-dark-bg/80 flex flex-col items-center justify-center rounded-lg hidden">
                    <i class="fas fa-circle-notch fa-spin text-brand-green text-3xl mb-3"></i>
                    <p class="text-sm font-medium text-text-secondary dark:text-dark-secondary" id="loader-text">Loading
                        Model...</p>
                    <div class="w-48 h-1 bg-gray-200 rounded-full mt-3 overflow-hidden dark:bg-gray-800">
                        <div id="progress-bar" class="h-full bg-brand-green w-0 transition-all duration-300"></div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end text-xs text-text-tertiary">
                <button id="copy-btn" class="hover:text-brand-green"><i class="far fa-copy"></i> Copy</button>
            </div>
        </div>
    </div>

    <!-- Stats -->
    <div class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="p-4 bg-white rounded-lg border border-border dark:bg-dark-surface dark:border-dark-border">
            <div class="text-xs text-text-tertiary uppercase tracking-wider mb-1">Model</div>
            <div class="font-mono font-bold text-sm">Xenova/nllb-200</div>
        </div>
        <div class="p-4 bg-white rounded-lg border border-border dark:bg-dark-surface dark:border-dark-border">
            <div class="text-xs text-text-tertiary uppercase tracking-wider mb-1">Size</div>
            <div class="font-mono font-bold text-sm">~170 MB</div>
        </div>
        <div class="p-4 bg-white rounded-lg border border-border dark:bg-dark-surface dark:border-dark-border">
            <div class="text-xs text-text-tertiary uppercase tracking-wider mb-1">Device</div>
            <div class="font-mono font-bold text-sm text-brand-green">WebGPU/WASM</div>
        </div>
        <div class="p-4 bg-white rounded-lg border border-border dark:bg-dark-surface dark:border-dark-border">
            <div class="text-xs text-text-tertiary uppercase tracking-wider mb-1">Privacy</div>
            <div class="font-mono font-bold text-sm text-brand-green">100% Local</div>
        </div>
    </div>
</div>

<script type="module" src="{% static 'js/universal_translator.js' %}"></script>
{% endblock %}