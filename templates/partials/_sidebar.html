{% load static %}
<aside
    class="hidden md:flex flex-col w-64 h-screen sticky top-0 bg-bg-primary border-r border-border shrink-0 z-40 transition-colors duration-300 dark:bg-dark-bg dark:border-dark-border">
    <div class="h-16 flex items-center px-6 border-b border-border dark:border-dark-border">
        <a href="/" class="flex items-center gap-3 group">
            <img src="{% static 'images/logos/logo.png' %}" alt="Kiri Logo"
                class="w-8 h-8 object-contain transition-transform group-hover:scale-105">
            <span
                class="font-display font-bold text-lg tracking-tight text-text-primary dark:text-dark-text group-hover:text-brand-green transition-colors">
                KIRI
            </span>
        </a>
    </div>

    <nav class="flex-1 overflow-y-auto py-6 px-3 space-y-1">

        <a href="{% url 'core:home' %}"
            class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-text-secondary hover:bg-bg-tertiary hover:text-text-primary transition-all dark:text-dark-secondary dark:hover:bg-dark-surface dark:hover:text-white
           {% if request.path == '/' %}bg-bg-tertiary text-text-primary dark:bg-dark-surface dark:text-white{% endif %}">
            <i class="fas fa-home w-5 text-center opacity-70"></i>
            <span>Home</span>
        </a>

        <a href="{% url 'publications:list' %}"
            class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-text-secondary hover:bg-bg-tertiary hover:text-text-primary transition-all dark:text-dark-secondary dark:hover:bg-dark-surface dark:hover:text-white
           {% if 'publications' in request.path %}bg-bg-tertiary text-text-primary dark:bg-dark-surface dark:text-white{% endif %}">
            <i class="fas fa-book w-5 text-center opacity-70"></i>
            <span>Publications</span>
        </a>

        <a href="{% url 'projects:list' %}"
            class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-text-secondary hover:bg-bg-tertiary hover:text-text-primary transition-all dark:text-dark-secondary dark:hover:bg-dark-surface dark:hover:text-white
            {% if 'projects' in request.path %}bg-bg-tertiary text-text-primary dark:bg-dark-surface dark:text-white{% endif %}">
            <i class="fas fa-code w-5 text-center opacity-70"></i>
            <span>Projects</span>
        </a>

        <div class="my-4 border-t border-border dark:border-dark-border mx-3"></div>

        <div class="px-3 mb-2">
            <div
                class="text-xs font-mono font-bold text-text-tertiary uppercase tracking-wider dark:text-dark-secondary">
                Trending
            </div>
        </div>

    </nav>

    <div class="p-4 border-t border-border dark:border-dark-border bg-bg-secondary dark:bg-dark-surface">
        {% if user.is_authenticated %}
        <div class="flex items-center gap-3">
            {% if user.github_avatar_url %}
            <img src="{{ user.github_avatar_url }}" alt="Avatar"
                class="w-9 h-9 rounded-sm border border-border dark:border-dark-border">
            {% else %}
            <div
                class="w-9 h-9 rounded-sm bg-brand text-white flex items-center justify-center font-bold text-xs dark:bg-dark-border">
                {{ user.username|slice:":2"|upper }}
            </div>
            {% endif %}
            <div class="flex-1 min-w-0">
                <div class="text-sm font-medium text-text-primary truncate dark:text-white">{{ user.username }}</div>
                <div class="text-xs text-text-tertiary truncate dark:text-dark-secondary">{{ user.get_role_display }}
                </div>
            </div>
            <a href="{% url 'account_logout' %}"
                class="text-text-tertiary hover:text-error dark:text-dark-secondary dark:hover:text-red-400">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
        {% else %}
        <a href="{% url 'account_login' %}"
            class="flex items-center justify-center w-full px-4 py-2 border border-brand text-brand hover:bg-brand hover:text-white rounded-md text-sm font-medium transition-all dark:border-white dark:text-white dark:hover:bg-white dark:hover:text-black">
            <i class="fab fa-github mr-2"></i> Join Kiri
        </a>
        {% endif %}

        <button id="theme-toggle-sidebar"
            class="mt-3 w-full flex items-center justify-center gap-2 text-xs text-text-tertiary hover:text-text-primary dark:text-dark-secondary dark:hover:text-white transition-colors">
            <i class="fas fa-moon"></i> <span>Dark Mode</span>
        </button>
    </div>
</aside>